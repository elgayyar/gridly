<app-main-nav>
  <!-- Row 1 -->
  <div  fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayout="1%" fxLayoutAlign="center" fxFill>
    <div fxFlex="100%" fxFlex.xs="100%">
     
      <mat-card class="home-card" fxFlex="50%" fxLayoutDesign="left" >
      <table mat-table #table [dataSource]="dataSource" matSort matSortActive="timeStamp" matSortDirection="asc" class="mat-elevation-z8">
        
        <ng-container matColumnDef="timeStamp">
          <th class= "header" mat-header-cell *matHeaderCellDef mat-sort-header>Time</th>
          <td class= "cell" mat-cell *matCellDef="let element"> {{element.timeStamp}} </td>
        </ng-container>

        <div *ngIf="isConsumer">
        <ng-container matColumnDef="seller">
            <th class= "header" mat-header-cell *matHeaderCellDef mat-sort-header>Seller</th>
            <td class= "cell" mat-cell *matCellDef="let element"> {{element.seller}} </td>
        </ng-container>
        </div>

        <div *ngIf="!isConsumer">
        <ng-container matColumnDef="buyer">
            <th class= "header" mat-header-cell *matHeaderCellDef mat-sort-header>Buyer</th>
            <td class= "cell" mat-cell *matCellDef="let element"> {{element.buyer}} </td>
        </ng-container>
        </div>
 
        <ng-container matColumnDef="electricityQuantity">
          <th class= "header" mat-header-cell *matHeaderCellDef mat-sort-header>Quantity (kWh)</th>
          <td class= "cell" mat-cell *matCellDef="let element"> {{element.electricityQuantity}} </td>
        </ng-container>
   
        <ng-container matColumnDef="unitElectricityPrice">
          <th class= "header" mat-header-cell *matHeaderCellDef mat-sort-header>Unit Price ($/kWh)</th>
          <td class= "cell" mat-cell *matCellDef="let element">{{element.unitElectricityPrice}} </td>
        </ng-container>

        <ng-container matColumnDef="totalPrice">
          <th class= "header" mat-header-cell *matHeaderCellDef mat-sort-header>Total Price ($)</th>
          <td class= "cell" mat-cell *matCellDef="let element">{{element.totalPrice}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[7]" showFirstLastButtons></mat-paginator>
    </mat-card>
    
      <mat-card class="home-card" fxFlex="50%" fxLayoutDesign="left" *ngIf="transactionsList.length != 0">
      <span fxLayoutDesign="left" class="graph-title">Transaction Behaviour</span>
        <ngx-charts-line-chart
        [legend]="legend"
        [scheme]="colorScheme"
        [results]="multi"
        [gradient]="gradient"
        [xAxis]="showXAxis"
        [yAxis]="showYAxis"
        [legend]="showLegend"
        [showXAxisLabel]="showXAxisLabel"
        [showYAxisLabel]="showYAxisLabel"
        [xAxisLabel]="xAxisLabel"
        [yAxisLabel]="yAxisLabel"
        [autoScale]="autoScale"
        [timeline]="timeline"
        [view]="view"
        (select)="onSelect($event)">
      </ngx-charts-line-chart>
    </mat-card>
    </div>
  </div>

  <!-- Show this when there are no transactions -->
  <ng-template #noTransactions>
      <div fxFlex="25%" fxFlex.xs="100%"></div>
      <div fxFlex="50%" fxFlex.xs="100%">
          <mat-card class="home-card" fxFlex="100%" fxLayoutDesign="left">
              <mat-card-title>There are no transactions to display.</mat-card-title>
          </mat-card> 
      </div>
      <div fxFlex="25%" fxFlex.xs="100%"></div>
  </ng-template>

</app-main-nav>
